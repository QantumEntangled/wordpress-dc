version: '3.3'

services:
    db:
        image: mysql:5.7
        restart: unless-stopped
        networks:
            - net
        volumes:
            - "./data/db:/var/lib/mysql"
        environment:
            - "MYSQL_ROOT_PASSWORD=somewordpress"
            - "MYSQL_DATABASE=wordpress"
            - "MYSQL_USER=wordpress"
            - "MYSQL_PASSWORD=wordpress"

    app:
        image: wordpress:latest
        restart: unless-stopped
        depends_on:
            - db
        networks:
            - net
        ports:
            - "8000:80"
        environment:
            - "WORDPRESS_DB_HOST=db:3306"
            - "WORDPRESS_DB_USER=wordpress"
            - "WORDPRESS_DB_PASSWORD=wordpress"

networks:
    net: